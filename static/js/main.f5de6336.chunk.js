(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{51:function(e,t,n){e.exports=n(93)},93:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),o=n.n(c),i=n(18),s=n(43),u=n(45),l=n(6),p=n(97),d=n(98),m=n(8),h=n(9),f=n(11),b=n(10),v=n(12),y=n(14),x=n.n(y),k=n(22),g=n(21),E=n.n(g),I=function(e){return{type:"CHANGE_INDEX",payload:{albumIndex:e,trackIndex:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},O=function(e,t,n){return function(){var a=Object(k.a)(x.a.mark(function a(r){var c,o;return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=t[n].uri,a.next=3,E()({method:"put",baseURL:"https://api.spotify.com/v1/me/player/play?",params:{device_id:"8823f9501fd02a23671d4b6e3260d078e835ccde"},headers:{authorization:"Bearer ".concat(e)},data:{uris:[c],offset:{position:0}}});case 3:return a.next=5,E()({method:"get",url:" \thttps://api.spotify.com/v1/me/player",headers:{authorization:"Bearer ".concat(e)}});case 5:o=a.sent,r({type:"PLAY_TRACK",payload:o.data.item});case 7:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},j=function(e,t){return function(){var t=Object(k.a)(x.a.mark(function t(n){var a;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=E.a.create({baseURL:"https://api.spotify.com/v1/me/player",headers:{authorization:"Bearer ".concat(e)}}),t.next=3,a.put("/pause");case 3:n({type:"PAUSE_TRACK"});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},T=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onLogin=function(){n.props.loginUser()},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"renderButton",value:function(){return this.props.signedIn?r.a.createElement("button",{type:"button",className:"btn btn-danger"},"Logout"):r.a.createElement("button",{onClick:this.onLogin,type:"button",className:"btn btn-success"},"Login with Spotify")}},{key:"render",value:function(){return this.renderButton()}}]),t}(r.a.Component),w=Object(l.b)(function(e){return{signedIn:e.auth.signedIn}},{loginUser:function(){var e=new URL("https://accounts.spotify.com/authorize?");return e.searchParams.append("client_id","43c8bd59b2ec4dd0b807352b209b6636"),e.searchParams.append("response_type","token"),e.searchParams.append("redirect_uri","/SpotifyAndReact"),e.searchParams.append("scope","user-modify-playback-state streaming user-read-playback-state"),window.location=e.href,{type:"LOGIN_USER"}}})(T),N=n(46),A=n(95),C=n(96),_=function(e){var t=e.track,n=e.trackIndex,a=e.onSelectTrack,c=e.textColor;return r.a.createElement("li",{onClick:function(){return a(n)},className:"list-group-item bg-dark ".concat(c),style:{cursor:"pointer"}},t.name)},S=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onSelectTrack=function(e){n.props.changeIndex(n.props.albumIndex,e)},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"list-group list-group-flush"},this.props.tracks.map(function(t,n){return r.a.createElement(_,{onSelectTrack:e.onSelectTrack,trackIndex:n,track:t,key:t.uri,textColor:n===e.props.trackIndex?"text-muted":"text-light"})}))}}]),t}(r.a.Component),R=Object(l.b)(function(e){return{token:e.auth.token,albumIndex:e.index.albumIndex,trackIndex:e.index.trackIndex}},{changeIndex:I})(S),L=function(e){var t=e.coverSource,n=e.coverAltText;return r.a.createElement("img",{className:"p-1",src:t,alt:n})},P=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onPlay=function(){n.props.playTrack(n.props.token,n.props.activeAlbum,n.props.index.trackIndex)},n.onPause=function(){n.props.pauseTrack(n.props.token)},n.onNext=function(){n.props.nextTrack(n.props.index.trackIndex,n.props.activeAlbum,n.props.token)},n.onPrev=function(){n.props.prevTrack(n.props.index.trackIndex,n.props.activeAlbum,n.props.token)},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){console.log(e),e.index.albumIndex===this.props.index.albumIndex&&e.index.trackIndex===this.props.index.albumIndex||this.props.playTrack(this.props.token,this.props.activeAlbum,this.props.index.trackIndex)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,"Album Index: ",this.props.index.albumIndex),r.a.createElement("div",null,"Track Index: ",this.props.index.trackIndex),r.a.createElement("button",{onClick:this.onPlay,className:"btn btn-success m-2"},"Play"),r.a.createElement("button",{onClick:this.onPause,className:"btn btn-danger m-2"},"||"),r.a.createElement("button",{onClick:this.onPrev,className:"btn btn-info m-2"},"prev"),r.a.createElement("button",{onClick:this.onNext,className:"btn btn-info m-2"},"next"))}}]),t}(r.a.Component),U=Object(l.b)(function(e){var t=e.albums[e.index.albumIndex].album.tracks.items;return{token:e.auth.token,activeAlbum:t,index:e.index}},{playTrack:O,pauseTrack:j,nextTrack:function(e,t,n){return function(){var a=Object(k.a)(x.a.mark(function a(r){var c,o;return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=e===t.length-1?0:e+1,o=t[e].uri,a.next=4,E()({method:"put",baseURL:"https://api.spotify.com/v1/me/player/play?",params:{device_id:"8823f9501fd02a23671d4b6e3260d078e835ccde"},headers:{authorization:"Bearer ".concat(n)},data:{uris:[o],offset:{position:0}}});case 4:r({type:"NEXT_TRACK",payload:c});case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},prevTrack:function(e,t,n){return function(){var a=Object(k.a)(x.a.mark(function a(r){var c,o;return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=0===e?t.length-1:e-1,o=t[e].uri,a.next=4,E()({method:"put",baseURL:"https://api.spotify.com/v1/me/player/play?",params:{device_id:"8823f9501fd02a23671d4b6e3260d078e835ccde"},headers:{authorization:"Bearer ".concat(n)},data:{uris:[o],offset:{position:0}}});case 4:r({type:"PREV_TRACK",payload:c});case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}})(P),D=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},n.onExiting=function(){n.animating=!0},n.onExited=function(){n.animating=!1},n.next=function(){if(!n.animating){var e=n.state.activeIndex===n.props.albums.length-1?0:n.state.activeIndex+1;n.setState({activeIndex:e}),n.props.changeIndex(n.state.activeIndex)}},n.previous=function(){if(!n.animating){var e=0===n.state.activeIndex?n.props.albums.length-1:n.state.activeIndex-1;n.setState({activeIndex:e}),n.props.changeIndex(n.state.activeIndex)}},n.goToIndex=function(e){n.animating||n.setState({activeIndex:e})},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.isSignedIn&&this.props.getAlbums(this.props.token)}},{key:"render",value:function(){var e=this,t=this.state.activeIndex,n=this.props.albums.map(function(t){return r.a.createElement(N.a,{key:t.src,onExiting:e.onExiting,onExited:e.onExited},r.a.createElement("div",{className:"row justify-content-center",style:{height:500}},r.a.createElement("div",{className:"col-md-4 .offset-md-4 w-100"},r.a.createElement("div",{className:"card bg-dark shadow-lg rounded"},r.a.createElement(L,{className:"card-img-top",coverSource:t.src,coverAltText:t.altText}),r.a.createElement("div",{className:"card-body h-100 text-light"},r.a.createElement("h5",{className:"card-title"}," ",t.info.name),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},t.info.artists[0].name),r.a.createElement("p",{className:"card-text"}),r.a.createElement(U,null)))),r.a.createElement("div",{className:"col-md-4 h-100"},r.a.createElement("div",{className:"card bg-dark shadow-lg rounded"},r.a.createElement("div",{className:"card-body",style:{height:500,overflowY:"scroll"}},r.a.createElement(R,{tracks:t.tracks}))))))});return r.a.createElement(A.a,{className:"container",activeIndex:t,next:this.next,previous:this.previous,interval:!1},n,r.a.createElement(C.a,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),r.a.createElement(C.a,{direction:"next",directionText:"Next",onClickHandler:this.next}))}}]),t}(a.Component),K=Object(l.b)(function(e,t){var n=e.albums.map(function(e){return{src:e.album.images[1].url,altText:"AlbumCover",caption:e.album.artists[0].name,tracks:e.album.tracks.items,info:e.album}});return{token:e.auth.token,isSignedIn:e.auth.signedIn,albums:n}},{getAlbums:function(e){return function(){var t=Object(k.a)(x.a.mark(function t(n){var a,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=E.a.create({baseURL:"https://api.spotify.com/v1",headers:{Authorization:"Bearer ".concat(e)}}),t.next=3,a.get("me/albums");case 3:r=t.sent,n({type:"GET_ALBUMS",payload:r.data.items});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},playTrack:O,pauseTrack:j,changeIndex:I})(D),B=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.token;window.onSpotifyWebPlaybackSDKReady=function(){e.player=new window.Spotify.Player({name:"Finns Player",getOAuthToken:function(e){e(t)}}),e.player.addListener("initialization_error",function(e){var t=e.message;console.error(t)}),e.player.addListener("authentication_error",function(e){var t=e.message;console.error(t)}),e.player.addListener("account_error",function(e){var t=e.message;console.error(t)}),e.player.addListener("playback_error",function(e){var t=e.message;console.error(t)}),e.player.addListener("player_state_changed",function(e){console.log(e)}),e.player.addListener("ready",function(e){var t=e.device_id;console.log("Ready with Device ID",t)}),e.player.addListener("not_ready",function(e){var t=e.device_id;console.log("Device ID has gone offline",t)}),e.player.connect().then(function(e){e&&console.log("The Web Playback SDK successfully connected to Spotify!")})}}},{key:"render",value:function(){return null}}]),t}(r.a.Component),z=Object(l.b)(function(e){return{auth:e.auth}},{})(B),G=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=window.location.href;if(e.includes("#")){var t=e.match(/#(?:access_token)=([\S\s]*?)&/)[1];this.props.receiveToken(t)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"bg-light text-dark"},r.a.createElement("nav",{className:"navbar navbar-white bg-dark shadow-lg rounded"},r.a.createElement("div",{className:"navbar-brand text-white"},"AlbumCarousel"),r.a.createElement(w,null)),this.props.isSignedIn?r.a.createElement("div",null,r.a.createElement("div",{className:"row justify-content-center p-3"}),r.a.createElement(K,null)," ",r.a.createElement("br",null),r.a.createElement(z,null),r.a.createElement("footer",{className:"footer p-1 bg-dark shadow-lg rounded text-light text-right text-muted m-1"},"Created by Finn Stolze")):r.a.createElement("div",null," "))}}]),t}(r.a.Component),M=Object(l.b)(function(e){return{isSignedIn:e.auth.signedIn}},{receiveToken:function(e){return{type:"RECEIVED_TOKEN",payload:e}}})(G),H=n(48),V=n.n(H)()(),X=function(){return r.a.createElement(p.a,{basename:"/SpotifyAndReact",history:V},r.a.createElement("div",null,r.a.createElement(d.a,{path:"/",exact:!0,component:M})))},W=n(13),F={token:null,signedIn:null},J={currentTracks:[],position:0},Y={trackIndex:0,albumIndex:0},q=Object(i.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_TOKEN":return Object(W.a)({},e,{token:t.payload,signedIn:!0});default:return e}},albums:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALBUMS":return t.payload;default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENT_TRACK":return Object(W.a)({},e,{currentTrack:t.payload});case"CURRENT_ALBUM_TRACKS":return Object(W.a)({},e,{currentTracks:t.payload});case"CHANGE_POSITION":return Object(W.a)({},e,{position:t.payload});default:return e}},index:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_INDEX":return t.payload;case"NEXT_TRACK":case"PREV_TRACK":return Object(W.a)({},e,{trackIndex:t.payload});default:return e}}}),Q=(n(92),Object(i.createStore)(q,Object(s.composeWithDevTools)(Object(i.applyMiddleware)(u.a))));o.a.render(r.a.createElement(l.a,{store:Q},r.a.createElement(X,null)),document.querySelector("#root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.f5de6336.chunk.js.map